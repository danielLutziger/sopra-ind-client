{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\danie\\\\WebstormProjects\\\\sopra-fs23-template-client\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\defineProperty.js\";\nimport _objectSpread from \"C:\\\\Users\\\\danie\\\\WebstormProjects\\\\sopra-fs23-template-client\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\objectSpread2.js\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\danie\\\\WebstormProjects\\\\sopra-fs23-template-client\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport _slicedToArray from \"C:\\\\Users\\\\danie\\\\WebstormProjects\\\\sopra-fs23-template-client\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\danie\\\\WebstormProjects\\\\sopra-fs23-template-client\\\\src\\\\components\\\\views\\\\Registration.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport _regeneratorRuntime from \"C:\\\\Users\\\\danie\\\\WebstormProjects\\\\sopra-fs23-template-client\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";\nimport React, { useState } from 'react';\nimport { api, handleError } from 'helpers/api';\nimport User from 'models/User';\nimport { useHistory } from 'react-router-dom';\nimport { Button } from 'components/ui/Button';\nimport 'styles/views/Login.scss';\nimport BaseContainer from \"components/ui/BaseContainer\";\nimport { FormField } from \"../../helpers/formField\";\nimport { Alert } from \"react-bootstrap\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar Registration = function Registration(props) {\n  _s();\n\n  var history = useHistory();\n\n  var _useState = useState({\n    username: \"\",\n    password: \"\"\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      registrationValues = _useState2[0],\n      setRegistrationValues = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      notification = _useState4[0],\n      setNotification = _useState4[1];\n\n  var doRegistration = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var requestBody, response, user;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              requestBody = JSON.stringify(registrationValues);\n              _context.next = 4;\n              return api.post('/registration', requestBody);\n\n            case 4:\n              response = _context.sent;\n              // Get the returned user and update a new object.\n              user = new User(response.data); // Store the token into the local storage.\n\n              localStorage.setItem('token', user.token); // Login successfully worked --> navigate to the route /game in the GameRouter\n\n              history.push(\"/game\");\n              _context.next = 13;\n              break;\n\n            case 10:\n              _context.prev = 10;\n              _context.t0 = _context[\"catch\"](0);\n              alert(\"Something went wrong during the login: \\n\".concat(handleError(_context.t0)));\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 10]]);\n    }));\n\n    return function doRegistration() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var handleChange = function handleChange(event) {\n    var _event$target = event.target,\n        name = _event$target.name,\n        value = _event$target.value;\n\n    if (name === \"username\" && /\\s/.test(value)) {\n      setNotification(true);\n      return; // Do not update the state if the first name contains spaces\n    } else {\n      setNotification(false);\n    }\n\n    setRegistrationValues(function (prevState) {\n      return _objectSpread(_objectSpread({}, prevState), {}, _defineProperty({}, name, value));\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(BaseContainer, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"login container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login form\",\n        children: [/*#__PURE__*/_jsxDEV(FormField, {\n          label: \"Username\",\n          type: \"text\",\n          name: \"username\",\n          value: registrationValues.username,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 21\n        }, _this), notification && /*#__PURE__*/_jsxDEV(Alert, {\n          variant: \"danger\",\n          children: \"Spaces in the username are not allowed!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 38\n        }, _this), /*#__PURE__*/_jsxDEV(FormField, {\n          label: \"Password\",\n          type: \"password\",\n          name: \"password\",\n          value: registrationValues.password,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 21\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"login button-container\",\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            className: \"login stacked-button-container-left\",\n            width: \"100%\",\n            onClick: function onClick() {\n              return history.goBack();\n            },\n            children: \"Back\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 25\n          }, _this), /*#__PURE__*/_jsxDEV(Button, {\n            className: \"login stacked-button-container-right\",\n            disabled: !registrationValues.username || !registrationValues.password,\n            width: \"100%\",\n            onClick: function onClick() {\n              return doRegistration();\n            },\n            children: \"Register\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 25\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 21\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 17\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 9\n  }, _this);\n};\n/**\r\n * You can get access to the history object's properties via the withRouter.\r\n * withRouter will pass updated match, location, and history props to the wrapped component whenever it renders.\r\n */\n\n\n_s(Registration, \"59TTvrMKtefTUxwvBnmiIuzFoEc=\", false, function () {\n  return [useHistory];\n});\n\n_c = Registration;\nexport default Registration;\n\nvar _c;\n\n$RefreshReg$(_c, \"Registration\");","map":{"version":3,"sources":["C:/Users/danie/WebstormProjects/sopra-fs23-template-client/src/components/views/Registration.js"],"names":["React","useState","api","handleError","User","useHistory","Button","BaseContainer","FormField","Alert","Registration","props","history","username","password","registrationValues","setRegistrationValues","notification","setNotification","doRegistration","requestBody","JSON","stringify","post","response","user","data","localStorage","setItem","token","push","alert","handleChange","event","target","name","value","test","prevState","goBack"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\r\nimport {api, handleError} from 'helpers/api';\r\nimport User from 'models/User';\r\nimport {useHistory} from 'react-router-dom';\r\nimport {Button} from 'components/ui/Button';\r\nimport 'styles/views/Login.scss';\r\nimport BaseContainer from \"components/ui/BaseContainer\";\r\nimport {FormField} from \"../../helpers/formField\";\r\nimport {Alert} from \"react-bootstrap\";\r\n\r\n\r\nconst Registration = props => {\r\n    const history = useHistory();\r\n    const [registrationValues, setRegistrationValues] = useState({ username: \"\", password: \"\" });\r\n    const [notification, setNotification] = useState(false);\r\n\r\n    const doRegistration = async () => {\r\n        try {\r\n            const requestBody = JSON.stringify(registrationValues);\r\n            const response = await api.post('/registration', requestBody);\r\n\r\n            // Get the returned user and update a new object.\r\n            const user = new User(response.data);\r\n\r\n            // Store the token into the local storage.\r\n            localStorage.setItem('token', user.token);\r\n\r\n            // Login successfully worked --> navigate to the route /game in the GameRouter\r\n            history.push(`/game`);\r\n        } catch (error) {\r\n            alert(`Something went wrong during the login: \\n${handleError(error)}`);\r\n        }\r\n    };\r\n\r\n    const handleChange = (event) => {\r\n        const { name, value } = event.target;\r\n        if (name === \"username\" && /\\s/.test(value)) {\r\n            setNotification(true);\r\n            return; // Do not update the state if the first name contains spaces\r\n        } else {\r\n            setNotification(false);\r\n        }\r\n\r\n        setRegistrationValues((prevState) => ({\r\n            ...prevState,\r\n            [name]: value,\r\n        }));\r\n    };\r\n\r\n    return (\r\n        <BaseContainer>\r\n            <div className=\"login container\">\r\n                <div className=\"login form\">\r\n                    <FormField\r\n                        label=\"Username\"\r\n                        type=\"text\"\r\n                        name=\"username\"\r\n                        value={registrationValues.username}\r\n                        onChange={handleChange}\r\n                    />\r\n                    {notification && <Alert variant={\"danger\"}>Spaces in the username are not allowed!</Alert>}\r\n                    <FormField\r\n                        label=\"Password\"\r\n                        type=\"password\"\r\n                        name=\"password\"\r\n                        value={registrationValues.password}\r\n                        onChange={handleChange}\r\n                    />\r\n                    <div className=\"login button-container\">\r\n                        <Button\r\n                            className=\"login stacked-button-container-left\"\r\n                            width=\"100%\"\r\n                            onClick={() => history.goBack()}\r\n                        >\r\n                            Back\r\n                        </Button>\r\n                        <Button\r\n                            className=\"login stacked-button-container-right\"\r\n                            disabled={!registrationValues.username || !registrationValues.password}\r\n                            width=\"100%\"\r\n                            onClick={() => doRegistration()}\r\n                        >\r\n                            Register\r\n                        </Button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </BaseContainer>\r\n    );\r\n};\r\n\r\n/**\r\n * You can get access to the history object's properties via the withRouter.\r\n * withRouter will pass updated match, location, and history props to the wrapped component whenever it renders.\r\n */\r\nexport default Registration;\r\n"]},"metadata":{},"sourceType":"module"}